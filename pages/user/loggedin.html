<h2>Loggedin</h2>
<script>

//TODO Client Side token check is not needed, but i could atleast check that some basic entries in token payload are not empty and token not expired

var token = localStorage.getItem("token");

if (token){
    var parsedToken = parseJWT(token)
    if (parsedToken['username']){ //IF "LOGGEDIN"
        $('#server-results').html('Welcome ' + parsedToken['username']);
        //change Main Menu add edit user, delete user...
        $('#usernav').children('div').html("<a href='/user/edit/'>Edit</a><a href='/user/logout/'>Logout</a>");
        $('#mainnav').children('ul').append("<li><a href='/character/list/'>List character</a></li>");
        
    }
    else {

        alert('not logged in - token not valid - TODO: go to login');


    }
}
else {
    //alert('not logged in - no token found - TODO: go to login');
$("#app").html( '<button type="button" onclick="myFunction()">You are not logged in! Go to login page here</button>' );
}

function myFunction(){
var page = '/user/login';getPage(page);history.pushState(page, page, page);
}
</script>
