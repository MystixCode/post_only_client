<h2>Loggedin</h2>
<script>

//TODO Client Side token check is not needed, but i could atleast check that some basic entries in token payload are not empty and token not expired
var token = localStorage.getItem("token");
if (token){
    var parsedToken = parseJWT(token)
    if (parsedToken['username']){ //IF "LOGGEDIN"
        //change Main Menu add edit user, delete user...
        $('#usernav').children('div').html("<a href='/user/edit/'>Edit</a><a href='/user/logout/'>Logout</a>");
        $('#mainnav').children('ul').append("<li><a href='/character/list/'>List character</a></li>");
        $('#app').append("<p>Welcome " + parsedToken['username'] + "</p><p>TODO:if role = admin<p>");
        $('#app').append("<p>Roles: " + parsedToken['roles'] + "<p>");
    }
    else {
        alert('not logged in - token not valid - TODO: go to login');
    }
}
else {
    //alert('not logged in - no token found - TODO: go to login');
    $("#app").html( '<button type="button" onclick="var page = \'/user/login\';getPage(page);history.pushState(page, page, page);">You are not logged in! Go to login page here</button>' );

}


</script>
