<h2>Character list</h2>
<script>
    var parsedToken = isLoggedIn();
    if (parsedToken){
            var data = {};
            data['service'] = "character";
            data['action'] = "list";
            sendData(data);
    } else {
        $("#app").html('<button type="button" onclick="var page=\'/\';getPage(page);history.pushState(page, page, page);">Error Go Home</button>');
    }

    function onResponse(data){
        if (data['payload']!='' && data['payload']!='[]')
        {
            //alert(JSON.stringify(data));
            var payload = jQuery.parseJSON( data['payload'] );
            $("#app").append("<table id ='characterlist' style='width:100%;margin-bottom:10px;'><thead><tr><th>id</th><th>name</th><th class='alignright'>edit</th><th class='alignright'>delete</th></tr></thead></table>");
            $("#userlist").append('<tbody>');
            payload.forEach ((character, index) => {
                $("#characterlist").append("<tr><td data-label='id'>" + character['character_id'] + "</td><td data-label='name'><a >" + character['character_name'] + "</a></td><td class='alignright'><a href='/character/edit/" + character['character_id'] + "' ><i class='fa fa-edit'></i></a></td><td class='alignright'><a href='/character/delete/" + character['character_id'] + "' ><i class='fa fa-trash'></i></a></td></tr>");
            });
            $("#userlist").append('</tbody>');
        }
        $("#app").append('<button type="button" onclick="var page = \'/character/create\';getPage(page);history.pushState(page, page, page);">Create new char.</button>');
    }
</script>
