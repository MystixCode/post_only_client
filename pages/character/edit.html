<h2>Edit Character</h2>
    <form action="#" method="post" id="editcharacterform">
        <label>Name</label>
        <input type="text" name="name">
        <input type="submit" name="submit" value="Submit Form">
    </form>
<script>

    var parsedToken = isLoggedIn();
    if (parsedToken){
        var data = {};
        data['service'] = "character";
        data['action'] = "get";
        data['payload'] = {};
        var path = $(location).attr('pathname');
        path = path.replace(/^\/|\/$/g, '');
        var pagearr = path.split('/');
        var payload = [];
        for (i = 2; i < pagearr.length; i++) {
            payload.push(pagearr[i]);
            //alert(pagearr[i]);
        }
        data['payload']['character_id'] = payload[0];//
        sendData(data);


        $("#editcharacterform").submit(function(event) {
            event.preventDefault(); //prevent default action
            var data = {};
            data['service'] = "character";
            data['action'] = "edit";
            data['payload'] = {};
            data['payload']['character_id'] = payload[0];
            data['payload']['character_name'] = $(this[name="name"]).val();
            sendData(data);
        });

    } else {
        $("#app").html('<button type="button" onclick="var page=\'/\';getPage(page);history.pushState(page, page, page);">Error Go Home</button>');
    }

    function onResponse(data) {
        var payload = data['payload'];
        if (data['action'] == 'get')
        {
            //$("#status").html('<p>' + data['payload'] + '</p>').fadeIn(setTimeout(fade_out, 10000));
            $('input[name=name]').val(payload['character_name']);
        }
        if (data['action'] == 'edit')
        {
            $("#status").html('<p>' + payload['message'] + '</p>').fadeIn(setTimeout(fade_out, 10000));
            var page = '/character/list';
            getPage(page);
            history.pushState(page, page, page);
        }
    }
</script>
